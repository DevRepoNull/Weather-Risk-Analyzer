# Weather-Risk-Analyzer

## 1. چشم‌انداز (Vision)
ما در حال توسعه یک پلتفرم تحلیل‌گر ریسک آب‌وهوا هستیم که داده‌های خام هواشناسی را به شاخص‌های ریسک قابل استفاده و تصمیم‌یار تبدیل می‌کند، از جمله:

- ریسک یخ‌زدگی (احتمال آسیب به لوله‌ها)
- شاخص خطر گرما (مبتنی بر سلامت)
- در آینده: ریسک کشاورزی

هدف، طراحی یک سیستم ماژولار و آماده تولید (Production-Ready) است که معماری بک‌اند .NET را با سرویس‌های یادگیری ماشین مبتنی بر Python ترکیب می‌کند.

این پروژه به‌عنوان یک سیستم نمونه‌کار حرفه‌ای طراحی شده و موارد زیر را نمایش می‌دهد:
- معماری تمیز (Clean Architecture)
- ارتباط بین میکروسرویس‌ها
- پیش‌بینی سری‌های زمانی (Time Series Forecasting)
- موتور محاسبه ریسک (Risk Scoring Engine)
- CI/CD و کانتینرسازی
- فرآیند مهندسی تیمی

## 2. تعریف مسئله اصلی (Core Problem Statement)
داده‌های خام هواشناسی به‌صورت عمومی در دسترس هستند، اما تفسیر آن‌ها به شکل شاخص‌های ریسک قابل استفاده برای تصمیم‌گیری، به‌سادگی در دسترس نیست.

هدف ما ساخت سیستمی است که:
- داده‌های تاریخی و زنده هواشناسی را جمع‌آوری کند
- شرایط کوتاه‌مدت آب‌وهوا را پیش‌بینی کند
- شاخص‌های ریسک مبتنی بر دامنه کاربرد محاسبه کند
- نتایج را از طریق API و داشبورد ارائه دهد

## 3. معماری کلان سیستم (High-Level Architecture)
اجزای سیستم:

1. سرویس جمع‌آوری داده (Python)
 - دریافت داده‌های تاریخی از منابع عمومی مانند Meteostat
 - ذخیره‌سازی داده‌های ساختاریافته در پایگاه داده

2. سرویس پیش‌بینی یادگیری ماشین (Python + FastAPI)
 - آموزش مدل‌های سری زمانی
 - ارائه Endpoint برای دریافت پیش‌بینی

3. API اصلی تحلیل ریسک (.NET 8, ASP.NET Core)
 -  پیاده‌سازی بر پایه Clean Architecture
 - استفاده از الگوی CQRS
 - دسترسی به پایگاه داده
 - شامل ماژول موتور ریسک
 - ارتباط با سرویس ML

4. داشبورد (فاز دوم)
 - نمایش بصری ریسک
 - نمودارهای پیش‌بینی

## 4. پشته فناوری (نسخه اولیه)
Backend:
- .NET 8
- ASP.NET Core Web API
- EF Core
- PostgreSQL

یادگیری ماشین:
- Python
- FastAPI
- Pandas
- scikit-learn (در فاز اولیه)

زیرساخت:
- Docker
- GitHub Actions (در فاز بعدی)

## 5. قوانین مهندسی تیم
1. هیچ Commit مستقیمی به شاخه main انجام نمی‌شود.
2. تمامی ویژگی‌ها باید از طریق Pull Request اضافه شوند.
3. هر Pull Request باید:
 - به یک Issue مرتبط باشد
 - شامل توضیح فنی کوتاه باشد

4. پیام Commit باید از قالب مشخص پیروی کند:
```bash
type(scope): short description
```

مثال:

```bash
feat(api): add temperature forecast endpoint
```

5. تمامی تصمیمات معماری باید در مسیر /docs به‌صورت ADR مستند شوند.

## 6. ساختار مخزن (Repository Structure)
```bash
weather-risk-analyzer/
│
├── README.md
├── docs/
│   ├── project-charter.md
│   ├── architecture.md
│   └── adr/
├── src/
│   ├── backend/
│   └── ml-service/
├── docker/
└── .github/
    └── workflows/
```

## 7. برنامه مراحل توسعه (Milestone Plan)
Milestone 1 — پایه‌گذاری (هفته ۱–۲)
- راه‌اندازی مخزن
- طراحی نمودار معماری
- اعتبارسنجی منبع داده
- نمونه اولیه جمع‌آوری داده

Milestone 2 — پیش‌بینی (هفته ۳–۴)
- پیاده‌سازی مدل سری زمانی
- ایجاد Endpoint پیش‌بینی
- یکپارچه‌سازی با بک‌اند

Milestone 3 — موتور ریسک (هفته ۵–۶)
- ماژول ریسک یخ‌زدگی
- ماژول شاخص خطر گرما
- افزودن بازه اطمینان (Confidence Interval)

Milestone 4 — استقرار (هفته ۷ به بعد)
- Dockerization
- پیاده‌سازی CI/CD
- ارائه نسخه نمایشی عمومی

## 8. تعریف تکمیل‌شدن (Definition of Done)
یک ویژگی زمانی تکمیل‌شده محسوب می‌شود که:
- کد پیاده‌سازی شده باشد
- تست واحد نوشته شده باشد
- مستندات به‌روزرسانی شده باشد
- Pull Request بازبینی و تأیید شده باشد
- هیچ هشدار حل‌نشده‌ای باقی نمانده باشد